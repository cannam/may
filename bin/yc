#!/bin/sh
YLDIR=`dirname $0`/..
AYR_DIR=$YLDIR/../ayr
YETI_LIBDIR=${YETI_LIBDIR:=$YLDIR/../yeti}
if [ ! -d "$YETI_LIBDIR" ]; then 
    YETI_LIBDIR=$YLDIR/../other/yeti
fi
JVAMP_DIR=${JVAMP_DIR:=$YLDIR/../jvamp}
YERTLE_DIR=${YERTLE_DIR:=$YLDIR/../yertle}

YLJAR_WITH_COLON=$YLDIR/yetilab.jar:
if [ "$1" == "--no-yetilab-jar" ]; then
    YLJAR_WITH_COLON=""
    shift
fi

CLASSPATH=${YLJAR_WITH_COLON}$YETI_LIBDIR/yeti.jar:$YETI_LIBDIR/yeti-lib.jar:$JVAMP_DIR/jvamp.jar:$YERTLE_DIR/yertle.jar:$YLDIR/jars/jtransforms-2.4.jar:$YLDIR/jars/org.jzy3d-0.9.jar:$YLDIR/jars/jogl2-rc10/jogl-all.jar:$YLDIR/jars/jogl2-rc10/jogl-all-natives-linux-i586.jar:$YLDIR/jars/jogl2-rc10/gluegen.jar:$YLDIR/jars/jogl2-rc10/gluegen-rt.jar:$YLDIR/jars/jogl2-rc10/gluegen-rt-natives-linux-i586.jar:$YLDIR/jars/misc/opencsv-2.1.jar:$YLDIR/jars/misc/org.convexhull.jar:$YLDIR/jars/misc/swt.jar

YETI_MODULE_SOURCE_PATH=${YETI_LIBDIR}/modules \
    LD_LIBRARY_PATH=$AYR_DIR:$JVAMP_DIR:$YLDIR/native/linux32:$LD_LIBRARY_PATH \
    $JAVA_HOME/bin/java -classpath "$CLASSPATH" yeti.lang.compiler.yeti "$@"

