
module fft;

import edu.emory.mathcs.jtransforms.fft: DoubleFFT_1D;

b = load block;
vec = load fvector;
ch = load channels;

unpack p =
   (m = ch.deinterleaved 2 (b.block p);
    m[0] := vec.concat [m[0], vec.consts m[1][0] 1];
    m[1] := vec.concat [m[1], vec.zeros 1];
    m[1][0] := 0;
    m;
    );

fft n = 
   (d = new DoubleFFT_1D(n);
    do bl:
        v = b.unblock (b.copyOf bl);
        d#realForward(v);
        unpack v;
    done);

{
fft
}

